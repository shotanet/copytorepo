# copytorepo
リポジトリをまたいでビルド済みのファイル例えば`/dist`フォルダなどをコピーするためのアクション

## 🔐 GitHub Actions シークレット設定ガイド

このワークフローでは、`dist/` の内容を別リポジトリの特定ディレクトリに同期し、Pull Request を作成します。  
そのために以下のシークレットを GitHub リポジトリに設定する必要があります。

## 🚀 GitHub Actions ワークフロー設定（同期 & PR 作成）

### 📁 推奨フォルダ構成

```text
your-project/
├── .github/
│   └── workflows/
│       └── sync.yml     ← このファイルをここに配置
├── dist/                ← デプロイ対象のビルド成果物
├── ...
```

---


### 🧾 必要なシークレット一覧

| シークレット名   | 用途                                                             | 記入例 / 設定方法                                                                 |
|------------------|------------------------------------------------------------------|----------------------------------------------------------------------------------|
| `GH_PAT`         | ターゲットリポジトリへのアクセスに使用する Personal Access Token（PAT） | GitHub の [Developer Settings > Personal access tokens](https://github.com/settings/tokens) から発行<br>**必要スコープ**: `repo` |
| `TARGET_REPO`    | ターゲットリポジトリの `ユーザー名/リポジトリ名` 形式                     | 例：`shotanet/tools-shotanet.info`                                              |
| `TARGET_DIR`     | ターゲットリポジトリ内で `dist/` の内容を同期するサブディレクトリパス     | 例：`src/nanaseg`（ルート直下に置く場合は空文字や `.`）                          |
| `TARGET_BRANCH`  | ターゲットリポジトリの変更対象ブランチ                                  | 例：`develop` や `main`                                                         |

---

### ⚙️ シークレットの登録手順

1. GitHub 上で対象リポジトリを開く
2. 上部メニューから「**Settings**」をクリック
3. 左メニューの「**Secrets and variables > Actions**」を選択
4. 「**New repository secret**」ボタンをクリック
5. 上記のシークレット名と値を1つずつ登録

---

### ✅ 例：`TARGET_REPO` の設定

| 項目           | 値                              |
|----------------|----------------------------------|
| シークレット名 | `TARGET_REPO`                   |
| 設定値         | `shotanet/tools-shotanet.info`  |

---

### ⚠️ 注意事項

- このワークフローは `main` ブランチへの push をトリガーとして発動します。運用中の環境や意図しない変更に影響を与える可能性があるため、事前に十分な検証を行ってください。
- ビルドに失敗すると `dist/` の同期やPR作成も行われません。`npm run build` の成功を前提としています。
- シークレットに設定する`TARGET_REPO` および `TARGET_DIR` の指定を誤ると、意図しないリポジトリやディレクトリを上書きしてしまうおそれがあります。設定値には十分ご注意ください。
  viteやreactで構築した場合、`.gitignore`を調整して`dist`フォルダもコミットに含まれるようにしてください
---

### 🛡️ 免責事項

このコードおよびワークフローファイルは参考実装として提供されるものであり、  
これを使用したことによって生じたいかなる損害・不具合・データの損失・第三者とのトラブル等についても、  
作成者は一切の責任を負いません。  
ご利用は **自己責任** にてお願いいたします。

---
